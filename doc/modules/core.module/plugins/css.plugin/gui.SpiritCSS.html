<!DOCTYPE html><html lang="en"><head><title>modules/core.module/plugins/css.plugin/gui.SpiritCSS</title></head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0"><meta name="groc-relative-root" content="../../../../"><meta name="groc-document-path" content="modules/core.module/plugins/css.plugin/gui.SpiritCSS"><meta name="groc-project-path" content="src/modules/core.module/plugins/css.plugin/gui.SpiritCSS.js"><link rel="stylesheet" type="text/css" media="all" href="../../../../assets/style.css"><script type="text/javascript" src="../../../../assets/behavior.js"></script><body><div id="meta"><div class="file-path">src/modules/core.module/plugins/css.plugin/gui.SpiritCSS.js</div></div><div id="document"><div class="segment"><div class="comments"><div class="wrapper"><h1 id="guispiritcss">gui.SpiritCSS</h1>

<p>Spirit styling studio.
@extends {gui.SpiritPlugin}</p></div></div><div class="code"><div class="wrapper"><span class="nx">gui</span><span class="p">.</span><span class="nx">SpiritCSS</span> <span class="o">=</span> <span class="nx">gui</span><span class="p">.</span><span class="nx">SpiritPlugin</span><span class="p">.</span><span class="nx">extend</span> <span class="p">(</span> <span class="s2">&quot;gui.SpiritCSS&quot;</span><span class="p">,</span> <span class="p">{</span></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><p>Set single element.style.
@param {String} prop
@param {String} val
@returns {gui.Spirit}</p></div></div><div class="code"><div class="wrapper">  <span class="nx">set</span> <span class="o">:</span> <span class="kd">function</span> <span class="p">(</span> <span class="nx">prop</span><span class="p">,</span> <span class="nx">val</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">gui</span><span class="p">.</span><span class="nx">SpiritCSS</span><span class="p">.</span><span class="nx">set</span> <span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">spirit</span><span class="p">.</span><span class="nx">element</span><span class="p">,</span> <span class="nx">prop</span><span class="p">,</span> <span class="nx">val</span> <span class="p">);</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">spirit</span><span class="p">;</span>
  <span class="p">},</span></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><p>Get single element.style; see also compute method.
@param {String} prop
@returns {String}</p></div></div><div class="code"><div class="wrapper">  <span class="nx">get</span> <span class="o">:</span> <span class="kd">function</span> <span class="p">(</span> <span class="nx">prop</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">gui</span><span class="p">.</span><span class="nx">SpiritCSS</span><span class="p">.</span><span class="nx">get</span> <span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">spirit</span><span class="p">.</span><span class="nx">element</span><span class="p">,</span> <span class="nx">prop</span> <span class="p">);</span>
  <span class="p">},</span></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><p>Compute runtime style.
@param {String} prop
@returns {String}</p></div></div><div class="code"><div class="wrapper">  <span class="nx">compute</span> <span class="o">:</span> <span class="kd">function</span> <span class="p">(</span> <span class="nx">prop</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">gui</span><span class="p">.</span><span class="nx">SpiritCSS</span><span class="p">.</span><span class="nx">compute</span> <span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">spirit</span><span class="p">.</span><span class="nx">element</span><span class="p">,</span> <span class="nx">prop</span> <span class="p">);</span>
  <span class="p">},</span></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><p>Set multiple styles via key value map.
@param {Map<String,String>} map
@returns {gui.Spirit}</p></div></div><div class="code"><div class="wrapper">  <span class="nx">style</span> <span class="o">:</span> <span class="kd">function</span> <span class="p">(</span> <span class="nx">map</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">gui</span><span class="p">.</span><span class="nx">SpiritCSS</span><span class="p">.</span><span class="nx">style</span> <span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">spirit</span><span class="p">.</span><span class="nx">element</span><span class="p">,</span> <span class="nx">map</span> <span class="p">);</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">spirit</span><span class="p">;</span>
  <span class="p">},</span></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><p>Get or set (full) className.
@param @optional {String} name
@returns {object} gui.Spirit or String</p></div></div><div class="code"><div class="wrapper">  <span class="nx">name</span> <span class="o">:</span> <span class="kd">function</span> <span class="p">(</span> <span class="nx">name</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">spirit</span><span class="p">.</span><span class="nx">element</span><span class="p">.</span><span class="nx">className</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">name</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">spirit</span><span class="p">.</span><span class="nx">element</span><span class="p">.</span><span class="nx">className</span> <span class="o">=</span> <span class="nx">name</span><span class="p">;</span>
      <span class="nx">result</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">spirit</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">result</span><span class="p">;</span>
  <span class="p">},</span></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><p>classList.add
@param {String} name
@returns {gui.Spirit}</p></div></div><div class="code"><div class="wrapper">  <span class="nx">add</span> <span class="o">:</span> <span class="kd">function</span> <span class="p">(</span> <span class="nx">name</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">gui</span><span class="p">.</span><span class="nx">SpiritCSS</span><span class="p">.</span><span class="nx">add</span> <span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">spirit</span><span class="p">.</span><span class="nx">element</span><span class="p">,</span> <span class="nx">name</span> <span class="p">);</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">spirit</span><span class="p">;</span>
  <span class="p">},</span></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><p>classList.remove
@param {String} name
@returns {gui.Spirit}</p></div></div><div class="code"><div class="wrapper">  <span class="nx">remove</span> <span class="o">:</span> <span class="kd">function</span> <span class="p">(</span> <span class="nx">name</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">gui</span><span class="p">.</span><span class="nx">SpiritCSS</span><span class="p">.</span><span class="nx">remove</span> <span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">spirit</span><span class="p">.</span><span class="nx">element</span><span class="p">,</span> <span class="nx">name</span> <span class="p">);</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">spirit</span><span class="p">;</span>
  <span class="p">},</span></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><p>classList.toggle
@param {String} name
@returns {gui.Spirit}</p></div></div><div class="code"><div class="wrapper">  <span class="nx">toggle</span> <span class="o">:</span> <span class="kd">function</span> <span class="p">(</span> <span class="nx">name</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">gui</span><span class="p">.</span><span class="nx">SpiritCSS</span><span class="p">.</span><span class="nx">toggle</span> <span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">spirit</span><span class="p">.</span><span class="nx">element</span><span class="p">,</span> <span class="nx">name</span> <span class="p">);</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">spirit</span><span class="p">;</span>
  <span class="p">},</span></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><p>classList.contains
@param {String} name
@returns {boolean}</p></div></div><div class="code"><div class="wrapper">  <span class="nx">contains</span> <span class="o">:</span> <span class="kd">function</span> <span class="p">(</span> <span class="nx">name</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">gui</span><span class="p">.</span><span class="nx">SpiritCSS</span><span class="p">.</span><span class="nx">contains</span> <span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">spirit</span><span class="p">.</span><span class="nx">element</span><span class="p">,</span> <span class="nx">name</span> <span class="p">);</span>
  <span class="p">},</span> </div></div></div><div class="segment"><div class="comments"><div class="wrapper"><p>Spirit element mathes selector?
@param {String} selector
@returns {boolean}</p></div></div><div class="code"><div class="wrapper">  <span class="nx">matches</span> <span class="o">:</span> <span class="kd">function</span> <span class="p">(</span> <span class="nx">selector</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">gui</span><span class="p">.</span><span class="nx">SpiritCSS</span><span class="p">.</span><span class="nx">matches</span> <span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">spirit</span><span class="p">.</span><span class="nx">element</span><span class="p">,</span> <span class="nx">selector</span> <span class="p">);</span>
  <span class="p">}</span>
  
  
<span class="p">},</span> <span class="p">{},</span> <span class="p">{</span></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><h2 id="statics">Statics</h2></div></div></div><div class="segment"><div class="code"><div class="wrapper">  <span class="cm">/* ...................................................................... */</span></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><p>@static
classList.add
@param {Element} element
@param {String} names</p></div></div><div class="code"><div class="wrapper">  <span class="nx">add</span> <span class="o">:</span> <span class="kd">function</span> <span class="p">(</span> <span class="nx">element</span><span class="p">,</span> <span class="nx">name</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">name</span><span class="p">.</span><span class="nx">indexOf</span> <span class="p">(</span> <span class="s2">&quot; &quot;</span> <span class="p">)</span> <span class="o">&gt;-</span><span class="mi">1</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">name</span> <span class="o">=</span> <span class="nx">name</span><span class="p">.</span><span class="nx">split</span> <span class="p">(</span> <span class="s2">&quot; &quot;</span> <span class="p">);</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nb">Array</span><span class="p">.</span><span class="nx">isArray</span> <span class="p">(</span> <span class="nx">name</span> <span class="p">))</span> <span class="p">{</span>
      <span class="nx">name</span><span class="p">.</span><span class="nx">forEach</span> <span class="p">(</span> <span class="kd">function</span> <span class="p">(</span> <span class="nx">n</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">add</span> <span class="p">(</span> <span class="nx">element</span><span class="p">,</span> <span class="nx">n</span> <span class="p">);</span>
      <span class="p">},</span> <span class="k">this</span> <span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">_supports</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">element</span><span class="p">.</span><span class="nx">classList</span><span class="p">.</span><span class="nx">add</span> <span class="p">(</span> <span class="nx">name</span> <span class="p">);</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">now</span> <span class="o">=</span> <span class="nx">element</span><span class="p">.</span><span class="nx">className</span><span class="p">.</span><span class="nx">split</span> <span class="p">(</span> <span class="s2">&quot; &quot;</span> <span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">now</span><span class="p">.</span><span class="nx">indexOf</span> <span class="p">(</span> <span class="nx">name</span> <span class="p">)</span> <span class="o">===</span> <span class="o">-</span><span class="mi">1</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">now</span><span class="p">.</span><span class="nx">push</span> <span class="p">(</span> <span class="nx">name</span> <span class="p">);</span>
          <span class="nx">element</span><span class="p">.</span><span class="nx">className</span> <span class="o">=</span> <span class="nx">now</span><span class="p">.</span><span class="nx">join</span> <span class="p">(</span> <span class="s2">&quot; &quot;</span> <span class="p">);</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">},</span></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><p>@static
classList.remove
@param {Element} element
@param {String} name
@returns {gui.SpiritCSS}</p></div></div><div class="code"><div class="wrapper">  <span class="nx">remove</span> <span class="o">:</span> <span class="kd">function</span> <span class="p">(</span> <span class="nx">element</span><span class="p">,</span> <span class="nx">name</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">name</span><span class="p">.</span><span class="nx">indexOf</span> <span class="p">(</span> <span class="s2">&quot; &quot;</span> <span class="p">)</span> <span class="o">&gt;-</span><span class="mi">1</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">name</span> <span class="o">=</span> <span class="nx">name</span><span class="p">.</span><span class="nx">split</span> <span class="p">(</span> <span class="s2">&quot; &quot;</span> <span class="p">);</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nb">Array</span><span class="p">.</span><span class="nx">isArray</span> <span class="p">(</span> <span class="nx">name</span> <span class="p">))</span> <span class="p">{</span>
      <span class="nx">name</span><span class="p">.</span><span class="nx">forEach</span> <span class="p">(</span> <span class="kd">function</span> <span class="p">(</span> <span class="nx">n</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">remove</span> <span class="p">(</span> <span class="nx">element</span><span class="p">,</span> <span class="nx">n</span> <span class="p">);</span>
      <span class="p">},</span> <span class="k">this</span> <span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">_supports</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">element</span><span class="p">.</span><span class="nx">classList</span><span class="p">.</span><span class="nx">remove</span> <span class="p">(</span> <span class="nx">name</span> <span class="p">);</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">now</span> <span class="o">=</span> <span class="nx">element</span><span class="p">.</span><span class="nx">className</span><span class="p">.</span><span class="nx">split</span> <span class="p">(</span> <span class="s2">&quot; &quot;</span> <span class="p">);</span>
        <span class="kd">var</span> <span class="nx">idx</span> <span class="o">=</span> <span class="nx">now</span><span class="p">.</span><span class="nx">indexOf</span> <span class="p">(</span> <span class="nx">name</span> <span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">idx</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">1</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">now</span><span class="p">.</span><span class="nx">remove</span> <span class="p">(</span> <span class="nx">idx</span> <span class="p">);</span>
        <span class="p">}</span>
        <span class="nx">element</span><span class="p">.</span><span class="nx">className</span> <span class="o">=</span> <span class="nx">now</span><span class="p">.</span><span class="nx">join</span> <span class="p">(</span> <span class="s2">&quot; &quot;</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">},</span></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><p>@static
classList.toggle
@param {Element} element
@param {String} name
@returns {gui.SpiritCSS}</p></div></div><div class="code"><div class="wrapper">  <span class="nx">toggle</span> <span class="o">:</span> <span class="kd">function</span> <span class="p">(</span> <span class="nx">element</span><span class="p">,</span> <span class="nx">name</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">_supports</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">element</span><span class="p">.</span><span class="nx">classList</span><span class="p">.</span><span class="nx">toggle</span> <span class="p">(</span> <span class="nx">name</span> <span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">contains</span> <span class="p">(</span> <span class="nx">element</span><span class="p">,</span> <span class="nx">name</span> <span class="p">))</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">remove</span> <span class="p">(</span> <span class="nx">element</span><span class="p">,</span> <span class="nx">name</span> <span class="p">);</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">add</span> <span class="p">(</span> <span class="nx">element</span><span class="p">,</span> <span class="nx">name</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">},</span></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><p>@static
classList.contains
@param {Element} element
@param {String} name
@returns {boolean}</p></div></div><div class="code"><div class="wrapper">  <span class="nx">contains</span> <span class="o">:</span> <span class="kd">function</span> <span class="p">(</span> <span class="nx">element</span><span class="p">,</span> <span class="nx">name</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">result</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">_supports</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">result</span> <span class="o">=</span> <span class="nx">element</span><span class="p">.</span><span class="nx">classList</span><span class="p">.</span><span class="nx">contains</span> <span class="p">(</span> <span class="nx">name</span> <span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">classnames</span> <span class="o">=</span> <span class="nx">element</span><span class="p">.</span><span class="nx">className</span><span class="p">.</span><span class="nx">split</span> <span class="p">(</span> <span class="s2">&quot; &quot;</span> <span class="p">);</span>
      <span class="nx">result</span> <span class="o">=</span> <span class="nx">classnames</span><span class="p">.</span><span class="nx">indexOf</span> <span class="p">(</span> <span class="nx">name</span> <span class="p">)</span> <span class="o">&gt;-</span><span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">result</span><span class="p">;</span>
  <span class="p">},</span></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><p>@static
Set single element.style property (use style() for multiple)
@todo also automate shorthands such as "10px 20px 10px 20px"
@param {Element}
@param {String} prop
@returns {gui.SpiritCSS}</p></div></div><div class="code"><div class="wrapper">  <span class="nx">set</span> <span class="o">:</span> <span class="kd">function</span> <span class="p">(</span> <span class="nx">element</span><span class="p">,</span> <span class="nx">prop</span><span class="p">,</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">gui</span><span class="p">.</span><span class="nx">Type</span><span class="p">.</span><span class="nx">isNumber</span> <span class="p">(</span> <span class="nx">value</span> <span class="p">))</span> <span class="p">{</span>
      <span class="nx">value</span> <span class="o">=</span> <span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">_shorthands</span> <span class="p">[</span> <span class="nx">prop</span> <span class="p">]</span> <span class="o">||</span> <span class="s2">&quot;@&quot;</span> <span class="p">).</span><span class="nx">replace</span> <span class="p">(</span> <span class="s2">&quot;@&quot;</span><span class="p">,</span> <span class="nx">value</span> <span class="p">);</span>
    <span class="p">}</span>
    <span class="nx">value</span> <span class="o">=</span> <span class="nb">String</span> <span class="p">(</span> <span class="nx">value</span> <span class="p">);</span>
    <span class="k">switch</span> <span class="p">(</span> <span class="nx">prop</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">case</span> <span class="s2">&quot;float&quot;</span><span class="o">:</span> 
        <span class="nx">prop</span> <span class="o">=</span> <span class="s2">&quot;cssFloat&quot;</span><span class="p">;</span>
        <span class="k">break</span><span class="p">;</span>
      <span class="k">default</span> <span class="o">:</span>
        <span class="nx">value</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_normval</span> <span class="p">(</span> <span class="nx">element</span><span class="p">,</span> <span class="nx">value</span> <span class="p">);</span>
        <span class="nx">prop</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_normprop</span> <span class="p">(</span> <span class="nx">element</span><span class="p">,</span> <span class="nx">prop</span> <span class="p">);</span>
        <span class="k">break</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="nx">element</span><span class="p">.</span><span class="nx">style</span> <span class="p">[</span> <span class="nx">prop</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
  <span class="p">},</span></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><p>@static
@todo Get element.style property; if this has been set. 
Not to be confused with compute() for computedStyle!!!
@param {Element}
@param {String} prop
@returns {String}</p></div></div><div class="code"><div class="wrapper">  <span class="nx">get</span> <span class="o">:</span> <span class="kd">function</span> <span class="p">(</span> <span class="nx">element</span><span class="p">,</span> <span class="nx">prop</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_normval</span> <span class="p">(</span> <span class="nx">element</span><span class="p">.</span><span class="nx">style</span> <span class="p">[</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">_normprop</span> <span class="p">(</span> <span class="nx">element</span><span class="p">,</span> <span class="nx">prop</span> <span class="p">)</span>
    <span class="p">]);</span>
  <span class="p">},</span></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><p>@static
Set multiple element.style properties.
@param {object} thing Spirit or element.
@param {Map<String,String>} styles
@returns {object} Spirit or element</p></div></div><div class="code"><div class="wrapper">  <span class="nx">style</span> <span class="o">:</span> <span class="kd">function</span> <span class="p">(</span> <span class="nx">thing</span><span class="p">,</span> <span class="nx">styles</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">element</span> <span class="o">=</span> <span class="nx">thing</span> <span class="k">instanceof</span> <span class="nx">gui</span><span class="p">.</span><span class="nx">Spirit</span> <span class="o">?</span> <span class="nx">thing</span><span class="p">.</span><span class="nx">element</span> <span class="o">:</span> <span class="nx">thing</span><span class="p">;</span>
    <span class="nx">gui</span><span class="p">.</span><span class="nb">Object</span><span class="p">.</span><span class="nx">each</span> <span class="p">(</span> <span class="nx">styles</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span> <span class="nx">prop</span><span class="p">,</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">set</span> <span class="p">(</span> <span class="nx">element</span><span class="p">,</span> <span class="nx">prop</span><span class="p">,</span> <span class="nx">value</span> <span class="p">);</span>
    <span class="p">},</span> <span class="k">this</span> <span class="p">);</span>
    <span class="k">return</span> <span class="nx">thing</span><span class="p">;</span>
  <span class="p">},</span></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><p>@static
Compute runtime style.
@param {object} thing Spirit or element.
@param {String} prop
@returns {String}</p></div></div><div class="code"><div class="wrapper">  <span class="nx">compute</span> <span class="o">:</span> <span class="kd">function</span> <span class="p">(</span> <span class="nx">thing</span><span class="p">,</span> <span class="nx">prop</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">element</span> <span class="o">=</span> <span class="nx">thing</span> <span class="k">instanceof</span> <span class="nx">gui</span><span class="p">.</span><span class="nx">Spirit</span> <span class="o">?</span> <span class="nx">thing</span><span class="p">.</span><span class="nx">element</span> <span class="o">:</span> <span class="nx">thing</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">doc</span> <span class="o">=</span> <span class="nx">element</span><span class="p">.</span><span class="nx">ownerDocument</span><span class="p">,</span> <span class="nx">win</span> <span class="o">=</span> <span class="nx">doc</span><span class="p">.</span><span class="nx">defaultView</span><span class="p">;</span>
    <span class="nx">prop</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_standardcase</span> <span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">_normprop</span> <span class="p">(</span> <span class="nx">element</span><span class="p">,</span> <span class="nx">prop</span> <span class="p">));</span>
    <span class="k">return</span> <span class="nx">win</span><span class="p">.</span><span class="nx">getComputedStyle</span> <span class="p">(</span> <span class="nx">element</span><span class="p">,</span> <span class="kc">null</span> <span class="p">).</span><span class="nx">getPropertyValue</span> <span class="p">(</span> <span class="nx">prop</span> <span class="p">);</span>
  <span class="p">},</span></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><p>Node matches CSS selector?
@param {Node} node
@param {String} selector
@returns {boolean}</p></div></div><div class="code"><div class="wrapper">  <span class="nx">matches</span> <span class="o">:</span> <span class="kd">function</span> <span class="p">(</span> <span class="nx">node</span><span class="p">,</span> <span class="nx">selector</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">node</span> <span class="p">[</span> <span class="k">this</span><span class="p">.</span><span class="nx">_matchmethod</span> <span class="p">](</span> <span class="nx">selector</span> <span class="p">);</span>
  <span class="p">},</span></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><h2 id="private-statics">Private statics</h2></div></div></div><div class="segment"><div class="code"><div class="wrapper">  <span class="cm">/* ...................................................................... */</span></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><p>@static
Non-matching vendors removed after first run. First entry 
gets to stay since it represents the unprefixed property.
@type {Array<String>}</p></div></div><div class="code"><div class="wrapper">  <span class="nx">_vendors</span> <span class="o">:</span> <span class="p">[</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;-webkit-&quot;</span><span class="p">,</span> <span class="s2">&quot;-moz-&quot;</span><span class="p">,</span> <span class="s2">&quot;-ms-&quot;</span><span class="p">,</span> <span class="s2">&quot;-o-&quot;</span> <span class="p">],</span></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><p>@static
_supports Element.classList?
@type {boolean}</p></div></div><div class="code"><div class="wrapper">  <span class="nx">_supports</span> <span class="o">:</span> <span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">.</span><span class="nx">classList</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">,</span></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><p>@static
CamelCase string.
@param {String} string
@returns {String}</p></div></div><div class="code"><div class="wrapper">  <span class="nx">_camelcase</span> <span class="o">:</span> <span class="kd">function</span> <span class="p">(</span> <span class="nx">string</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">string</span><span class="p">.</span><span class="nx">replace</span> <span class="p">(</span> <span class="sr">/-([a-z])/ig</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span> <span class="nx">all</span><span class="p">,</span> <span class="nx">letter</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">letter</span><span class="p">.</span><span class="nx">toUpperCase</span><span class="p">();</span>
    <span class="p">});</span>
  <span class="p">},</span></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><p>@static
standard-css-notate CamelCased string.
@param {String} string
@returns {String}</p></div></div><div class="code"><div class="wrapper">  <span class="nx">_standardcase</span> <span class="o">:</span> <span class="kd">function</span> <span class="p">(</span> <span class="nx">string</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">string</span><span class="p">.</span><span class="nx">replace</span> <span class="p">(</span> <span class="sr">/[A-Z]/g</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span> <span class="nx">all</span><span class="p">,</span> <span class="nx">letter</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="s2">&quot;-&quot;</span> <span class="o">+</span> <span class="nx">string</span><span class="p">.</span><span class="nx">charAt</span> <span class="p">(</span> <span class="nx">letter</span> <span class="p">).</span><span class="nx">toLowerCase</span> <span class="p">();</span>
    <span class="p">});</span>
  <span class="p">},</span>  </div></div></div><div class="segment"><div class="comments"><div class="wrapper"><p>@static 
Setter shorthands will autosuffix properties that require units 
in support of the syntax: this.css.width = 300; // no method()
@todo add tons of things to this list
@type {Map<String,String></p></div></div><div class="code"><div class="wrapper">  <span class="nx">_shorthands</span> <span class="o">:</span> <span class="p">{</span>
    <span class="nx">top</span> <span class="o">:</span> <span class="s2">&quot;@px&quot;</span><span class="p">,</span>
    <span class="nx">right</span> <span class="o">:</span> <span class="s2">&quot;@px&quot;</span><span class="p">,</span>
    <span class="nx">bottom</span> <span class="o">:</span> <span class="s2">&quot;@px&quot;</span><span class="p">,</span>
    <span class="nx">left</span> <span class="o">:</span> <span class="s2">&quot;@px&quot;</span><span class="p">,</span>
    <span class="nx">width</span> <span class="o">:</span> <span class="s2">&quot;@px&quot;</span><span class="p">,</span>
    <span class="nx">height</span> <span class="o">:</span> <span class="s2">&quot;@px&quot;</span><span class="p">,</span>
    <span class="nx">maxWidth</span> <span class="o">:</span> <span class="s2">&quot;@px&quot;</span><span class="p">,</span>
    <span class="nx">maxHeight</span> <span class="o">:</span> <span class="s2">&quot;@px&quot;</span><span class="p">,</span>
    <span class="nx">minWidth</span> <span class="o">:</span> <span class="s2">&quot;@px&quot;</span><span class="p">,</span>
    <span class="nx">minHeight</span> <span class="o">:</span> <span class="s2">&quot;@px&quot;</span><span class="p">,</span>
    <span class="nx">textIndent</span> <span class="o">:</span> <span class="s2">&quot;@px&quot;</span><span class="p">,</span>
    <span class="nx">fontWeight</span> <span class="o">:</span> <span class="s2">&quot;@&quot;</span><span class="p">,</span>
    <span class="nx">opacity</span> <span class="o">:</span> <span class="s2">&quot;@&quot;</span><span class="p">,</span>
    <span class="nx">zIndex</span> <span class="o">:</span> <span class="s2">&quot;@&quot;</span><span class="p">,</span>
    <span class="nx">position</span> <span class="o">:</span> <span class="s2">&quot;@&quot;</span><span class="p">,</span>
    <span class="nx">display</span> <span class="o">:</span> <span class="s2">&quot;@&quot;</span><span class="p">,</span>
    <span class="nx">visibility</span> <span class="o">:</span> <span class="s2">&quot;@&quot;</span>
  <span class="p">},</span></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><p>Normalize declaration value.
@param {String} value
@returns {value}</p></div></div><div class="code"><div class="wrapper">  <span class="nx">_normval</span> <span class="o">:</span> <span class="kd">function</span> <span class="p">(</span> <span class="nx">element</span><span class="p">,</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">vendors</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_vendors</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">value</span> <span class="o">&amp;&amp;</span> <span class="nx">value</span><span class="p">.</span><span class="nx">contains</span> <span class="p">(</span> <span class="s2">&quot;-beta-&quot;</span> <span class="p">))</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">parts</span> <span class="o">=</span> <span class="p">[];</span>
      <span class="nx">value</span><span class="p">.</span><span class="nx">split</span> <span class="p">(</span> <span class="s2">&quot;, &quot;</span> <span class="p">).</span><span class="nx">forEach</span> <span class="p">(</span> <span class="kd">function</span> <span class="p">(</span> <span class="nx">part</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">((</span> <span class="nx">part</span> <span class="o">=</span> <span class="nx">part</span><span class="p">.</span><span class="nx">trim</span> <span class="p">()).</span><span class="nx">startsWith</span> <span class="p">(</span> <span class="s2">&quot;-beta-&quot;</span> <span class="p">))</span> <span class="p">{</span>
          <span class="nx">vendors</span><span class="p">.</span><span class="nx">every</span> <span class="p">(</span> <span class="kd">function</span> <span class="p">(</span> <span class="nx">vendor</span> <span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">test</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_camelcase</span> <span class="p">(</span> <span class="nx">part</span><span class="p">.</span><span class="nx">replace</span> <span class="p">(</span> <span class="s2">&quot;-beta-&quot;</span><span class="p">,</span> <span class="nx">vendor</span> <span class="p">));</span>
            <span class="k">if</span> <span class="p">(</span> <span class="nx">element</span><span class="p">.</span><span class="nx">style</span> <span class="p">[</span> <span class="nx">test</span> <span class="p">]</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
              <span class="k">if</span> <span class="p">(</span> <span class="nx">vendors</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">2</span> <span class="p">)</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">_vendors</span> <span class="o">=</span> <span class="p">[</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="nx">vendor</span> <span class="p">];</span>
              <span class="p">}</span>
              <span class="nx">parts</span><span class="p">.</span><span class="nx">push</span> <span class="p">(</span> <span class="nx">part</span><span class="p">.</span><span class="nx">replace</span> <span class="p">(</span> <span class="s2">&quot;-beta-&quot;</span><span class="p">,</span> <span class="nx">vendor</span> <span class="p">));</span>
              <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
           <span class="p">},</span> <span class="k">this</span> <span class="p">);</span>   
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
          <span class="nx">parts</span><span class="p">.</span><span class="nx">push</span> <span class="p">(</span> <span class="nx">part</span> <span class="p">);</span>
        <span class="p">}</span>
      <span class="p">},</span> <span class="k">this</span> <span class="p">);</span>
      <span class="nx">value</span> <span class="o">=</span> <span class="nx">parts</span><span class="p">.</span><span class="nx">join</span> <span class="p">(</span> <span class="s2">&quot;,&quot;</span> <span class="p">);</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">value</span><span class="p">;</span>
  <span class="p">},</span></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><p>Normalize declaration property.
@param {Element} element
@param {String} prop
@returns {String}</p></div></div><div class="code"><div class="wrapper">  <span class="nx">_normprop</span> <span class="o">:</span> <span class="kd">function</span> <span class="p">(</span> <span class="nx">element</span><span class="p">,</span> <span class="nx">prop</span><span class="p">,</span> <span class="nx">xxx</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">vendors</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_vendors</span><span class="p">,</span> <span class="nx">fixt</span> <span class="o">=</span> <span class="nx">prop</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span> <span class="kc">true</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">prop</span><span class="p">.</span><span class="nx">startsWith</span> <span class="p">(</span> <span class="s2">&quot;-beta-&quot;</span> <span class="p">))</span> <span class="p">{</span>
        <span class="nx">vendors</span><span class="p">.</span><span class="nx">every</span> <span class="p">(</span> <span class="kd">function</span> <span class="p">(</span> <span class="nx">vendor</span> <span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span> <span class="nx">test</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_camelcase</span> <span class="p">(</span> <span class="nx">prop</span><span class="p">.</span><span class="nx">replace</span> <span class="p">(</span> <span class="s2">&quot;-beta-&quot;</span><span class="p">,</span> <span class="nx">vendor</span> <span class="p">));</span>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">element</span><span class="p">.</span><span class="nx">style</span> <span class="p">[</span> <span class="nx">test</span> <span class="p">]</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span> <span class="nx">vendors</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">2</span> <span class="p">)</span> <span class="p">{</span>
              <span class="k">this</span><span class="p">.</span><span class="nx">_vendors</span> <span class="o">=</span> <span class="p">[</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="nx">vendor</span> <span class="p">];</span> <span class="c1">// @todo at startup</span>
            <span class="p">}</span>
            <span class="nx">fixt</span> <span class="o">=</span> <span class="nx">test</span><span class="p">;</span>
            <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
        <span class="p">},</span> <span class="k">this</span> <span class="p">);</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">fixt</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_camelcase</span> <span class="p">(</span> <span class="nx">fixt</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">fixt</span><span class="p">;</span>
  <span class="p">},</span></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><p>Lookup vendors "matchesSelector" method.
@type {String} </p></div></div><div class="code"><div class="wrapper">  <span class="nx">_matchmethod</span> <span class="o">:</span> <span class="p">(</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">match</span> <span class="o">=</span> <span class="kc">null</span><span class="p">,</span> <span class="nx">root</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">;</span>
    <span class="p">[</span> 
      <span class="s2">&quot;mozMatchesSelector&quot;</span><span class="p">,</span> 
      <span class="s2">&quot;webkitMatchesSelector&quot;</span><span class="p">,</span> 
      <span class="s2">&quot;msMatchesSelector&quot;</span><span class="p">,</span> 
      <span class="s2">&quot;oMatchesSelector&quot;</span><span class="p">,</span> 
      <span class="s2">&quot;matchesSelector&quot;</span> 
    <span class="p">].</span><span class="nx">every</span> <span class="p">(</span> <span class="kd">function</span> <span class="p">(</span> <span class="nx">method</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">gui</span><span class="p">.</span><span class="nx">Type</span><span class="p">.</span><span class="nx">isDefined</span> <span class="p">(</span> <span class="nx">root</span> <span class="p">[</span> <span class="nx">method</span> <span class="p">]))</span> <span class="p">{</span>
        <span class="nx">match</span> <span class="o">=</span> <span class="nx">method</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="k">return</span> <span class="nx">match</span> <span class="o">===</span> <span class="kc">null</span><span class="p">;</span>
    <span class="p">});</span>
    <span class="k">return</span> <span class="nx">match</span><span class="p">;</span>
  <span class="p">})()</span>
  
<span class="p">});</span></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><p>Generate shorthand getters/setters for top|left|width|height etc.</p></div></div><div class="code"><div class="wrapper"><span class="p">(</span> <span class="kd">function</span> <span class="nx">shorthands</span> <span class="p">()</span> <span class="p">{</span>
  <span class="kd">function</span> <span class="nx">getset</span> <span class="p">(</span> <span class="nx">prop</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span> <span class="p">(</span> <span class="nx">gui</span><span class="p">.</span><span class="nx">SpiritCSS</span><span class="p">.</span><span class="nx">prototype</span><span class="p">,</span> <span class="nx">prop</span><span class="p">,</span> <span class="p">{</span>
      <span class="nx">enumerable</span> <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
      <span class="nx">configurable</span> <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
      <span class="nx">get</span> <span class="o">:</span> <span class="kd">function</span> <span class="nx">get</span> <span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nb">parseInt</span> <span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">get</span> <span class="p">(</span> <span class="nx">prop</span> <span class="p">),</span> <span class="mi">10</span> <span class="p">);</span>
      <span class="p">},</span>
      <span class="nx">set</span> <span class="o">:</span> <span class="kd">function</span> <span class="nx">set</span> <span class="p">(</span> <span class="nx">val</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">set</span> <span class="p">(</span> <span class="nx">prop</span><span class="p">,</span> <span class="nx">val</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">});</span>
  <span class="p">}</span>
  <span class="kd">var</span> <span class="nx">shorts</span> <span class="o">=</span> <span class="nx">gui</span><span class="p">.</span><span class="nx">SpiritCSS</span><span class="p">.</span><span class="nx">_shorthands</span><span class="p">;</span>
  <span class="k">for</span> <span class="p">(</span> <span class="kd">var</span> <span class="nx">prop</span> <span class="k">in</span> <span class="nx">shorts</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">shorts</span><span class="p">.</span><span class="nx">hasOwnProperty</span> <span class="p">(</span> <span class="nx">prop</span> <span class="p">))</span> <span class="p">{</span>
      <span class="nx">getset</span> <span class="p">(</span> <span class="nx">prop</span> <span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">})();</span></div></div></div></div></body></html>